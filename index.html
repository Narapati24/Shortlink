<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Explore the portfolio of Narapati Keysa Anandi, a skilled Web and Mobile Developer."
    />

    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://code.jquery.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="dns-prefetch" href="https://api.visitorbadge.io" />
    <link rel="dns-prefetch" href="https://ipapi.co" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="src/img/logo/RainyDeepLogo.png" />
    <link rel="shortcut icon" href="src/img/logo/RainyDeepLogo.png" />
    <link rel="apple-touch-icon" href="src/img/logo/RainyDeepLogo.png" />
    <link rel="manifest" href="favicon/site.webmanifest" />

    <!-- Critical CSS inline -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        overflow-x: hidden;
      }

      .loading {
        opacity: 0;
        transition: opacity 0.3s;
      }

      .loaded {
        opacity: 1;
      }

      /* Shimmer loading effect */
      @keyframes shimmer {
        0% {
          background-position: -468px 0;
        }
        100% {
          background-position: 468px 0;
        }
      }

      .shimmer {
        animation: shimmer 1.5s infinite;
        background: linear-gradient(
          to right,
          #1e293b 0%,
          #334155 20%,
          #1e293b 40%,
          #1e293b 100%
        );
        background-size: 800px 104px;
      }

      /* Fade in animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.6s ease-out forwards;
      }

      /* Mobile optimizations */
      @media (max-width: 640px) {
        html {
          font-size: 14px;
        }
      }

      /* Custom select dropdown styling */
      select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='white' d='M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1em;
        padding-right: 2.5rem;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
      }

      /* Style select dropdown options */
      select option {
        background-color: #0f172a;
        color: white;
        padding: 0.5rem;
      }
    </style>

    <!-- Defer non-critical CSS -->
    <link
      rel="stylesheet"
      href="src/css/style.css"
      media="print"
      onload="this.media='all'"
    />
    <noscript><link rel="stylesheet" href="src/css/style.css" /></noscript>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      media="print"
      onload="this.media='all'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    /></noscript>

    <!-- Preload key assets -->
    <link rel="preload" href="src/js/array.js" as="script" />
    <link rel="preload" href="src/js/main.js" as="script" />

    <!-- Font size fix for mobile accessibility -->
    <link rel="stylesheet" href="src/css/font-size-fix.css" />

    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <!-- Load data first -->
    <script src="src/js/array.js"></script>
    <script src="src/js/data-check.js"></script>

    <!-- SEO Meta Tags -->
    <title>Narapati Keysa Anandi - Web & Mobile Developer Portfolio</title>
    <meta
      name="keywords"
      content="web developer, mobile developer, portfolio, projects, Android, Flutter, Laravel"
    />
    <meta name="author" content="Narapati Keysa Anandi" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://narapati24.github.io/Shortlink/" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://narapati24.github.io/Shortlink/" />
    <meta
      property="og:title"
      content="Narapati Keysa Anandi - Web & Mobile Developer"
    />
    <meta
      property="og:description"
      content="Explore the portfolio of Narapati Keysa Anandi, a skilled Web and Mobile Developer."
    />
    <meta
      property="og:image"
      content="https://narapati24.github.io/Shortlink/src/img/profile/profile.jpg"
    />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Narapati Keysa Anandi",
        "jobTitle": "Web & Mobile Developer",
        "url": "https://narapati24.github.io/Shortlink/",
        "sameAs": [
          "https://github.com/Narapati24",
          "https://www.linkedin.com/in/narapati-keysa/"
        ],
        "image": "https://narapati24.github.io/Shortlink/src/img/profile/profile.jpg",
        "description": "Web and Mobile Developer specializing in creating innovative digital solutions"
      }
    </script>
  </head>

  <body
    class="loading bg-gradient-to-br from-midnight-950 via-slate-900 to-slate-800 min-h-screen text-gray-100"
  >
    <!-- Header with Theme Toggle -->
    <header
      class="fixed top-0 left-0 right-0 z-50 bg-midnight-950/80 backdrop-blur-lg border-b border-midnight-800/50"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center space-x-3">
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-midnight-500 to-midnight-700 flex items-center justify-center"
            >
              <span class="text-white font-bold text-lg">N</span>
            </div>
            <span class="text-xl font-bold text-white hidden sm:block"
              >Portfolio</span
            >
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="pt-24 pb-12">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
        <!-- Profile Hero Section -->
        <section class="mb-16 fade-in">
          <div
            class="bg-gradient-to-br from-midnight-900/50 to-midnight-800/50 backdrop-blur-xl rounded-2xl border border-midnight-700/50 overflow-hidden shadow-2xl"
          >
            <div class="p-8 sm:p-12">
              <div
                class="flex flex-col md:flex-row items-center md:items-start gap-8"
              >
                <!-- Profile Image -->
                <div class="relative">
                  <div
                    class="w-32 h-32 sm:w-40 sm:h-40 rounded-2xl overflow-hidden ring-4 ring-midnight-600/50 shadow-2xl"
                  >
                    <img
                      id="profileImage"
                      alt="Profile"
                      class="w-full h-full object-cover"
                    />
                  </div>
                </div>

                <!-- Profile Info -->
                <div class="flex-1 text-center md:text-left">
                  <h1
                    id="profileName"
                    class="text-4xl sm:text-5xl font-bold text-white mb-3 bg-gradient-to-r from-white to-midnight-200 bg-clip-text text-transparent"
                  ></h1>
                  <p
                    id="profileRole"
                    class="text-xl text-midnight-300 mb-6"
                  ></p>

                  <!-- Social Links -->
                  <div
                    id="socialLinks"
                    class="flex gap-4 justify-center md:justify-start mb-6"
                  >
                    <!-- Will be populated by JS -->
                  </div>

                  <!-- About Me Toggle -->
                  <button
                    id="profileToggle"
                    class="px-6 py-3 bg-midnight-700/50 hover:bg-midnight-600/50 rounded-lg text-midnight-100 transition-all duration-300 border border-midnight-600/50 flex items-center gap-2 mx-auto md:mx-0"
                    aria-expanded="false"
                  >
                    <span id="toggleText">Learn More</span>
                    <i
                      id="toggleIcon"
                      class="fas fa-chevron-down transition-transform duration-300"
                    ></i>
                  </button>
                </div>
              </div>

              <!-- Expandable Profile Details -->
              <div
                id="profileExpanded"
                class="mt-0 overflow-hidden transition-all duration-500 h-0"
              >
                <div class="mt-8 pt-8 border-t border-midnight-700/50">
                  <div class="grid md:grid-cols-2 gap-8">
                    <!-- About Me -->
                    <div>
                      <h2
                        class="text-2xl font-bold text-white mb-4 flex items-center gap-2"
                      >
                        <i class="fas fa-user-circle text-midnight-400"></i>
                        About Me
                      </h2>
                      <p
                        id="profileDesc"
                        class="text-midnight-300 leading-relaxed"
                      ></p>
                    </div>

                    <!-- Skills -->
                    <div>
                      <h2
                        class="text-2xl font-bold text-white mb-4 flex items-center gap-2"
                      >
                        <i class="fas fa-code text-midnight-400"></i>
                        Skills
                      </h2>
                      <div id="skillsList" class="flex flex-wrap gap-2">
                        <!-- Will be populated by JS -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Experience Button -->
        <section class="mb-16">
          <div class="text-center fade-in" style="animation-delay: 0.15s">
            <button
              id="experienceToggle"
              class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-midnight-500 to-midnight-600 hover:from-midnight-600 hover:to-midnight-700 text-white rounded-2xl shadow-lg border border-midnight-400/50 transition-all duration-300 hover:scale-105 hover:shadow-2xl"
            >
              <i class="fas fa-briefcase text-xl"></i>
              <span class="text-lg font-bold">View My Experience</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </section>

        <!-- Experience Modal -->
        <div
          id="experienceModal"
          class="fixed inset-0 bg-midnight-950/90 backdrop-blur-sm z-50 hidden items-center justify-center p-4"
          style="animation: fadeIn 0.3s ease-out"
        >
          <div
            id="experienceModalContent"
            class="bg-gradient-to-br from-midnight-900 to-midnight-950 rounded-3xl shadow-2xl border border-midnight-700/50 w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col"
            style="animation: slideUp 0.3s ease-out"
          >
            <!-- Modal Header -->
            <div
              class="flex items-center justify-between p-6 border-b border-midnight-700/50"
            >
              <div class="flex items-center gap-3">
                <i class="fas fa-briefcase text-2xl text-midnight-400"></i>
                <h2 class="text-3xl font-bold text-white">Experience</h2>
              </div>
              <button
                id="closeExperienceModal"
                class="w-10 h-10 rounded-lg bg-midnight-800/50 hover:bg-midnight-700/50 text-midnight-300 hover:text-white transition-all duration-300 flex items-center justify-center"
                aria-label="Close modal"
              >
                <i class="fas fa-times text-xl"></i>
              </button>
            </div>

            <!-- Filters -->
            <div class="p-6 border-b border-midnight-700/50">
              <div class="flex flex-col gap-4">
                <!-- Category Filter -->
                <div>
                  <h3 class="text-sm font-semibold text-midnight-300 mb-2">
                    Category:
                  </h3>
                  <div
                    id="experienceCategoryFilter"
                    class="flex flex-wrap gap-2"
                  >
                    <!-- Category buttons will be generated by JavaScript -->
                  </div>
                </div>

                <!-- Tag Filter -->
                <div>
                  <h3 class="text-sm font-semibold text-midnight-300 mb-2">
                    Filter by Skills:
                  </h3>
                  <div id="experienceTagFilter" class="flex flex-wrap gap-2">
                    <!-- Tag buttons will be generated by JavaScript -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Experience Container -->
            <div class="flex-1 overflow-y-auto p-6">
              <div id="experienceContainer" class="space-y-4">
                <!-- Experience cards will be generated by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <!-- Projects Section -->
        <section>
          <!-- Section Header with Filters -->
          <div class="mb-8 fade-in" style="animation-delay: 0.2s">
            <div
              class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6"
            >
              <div>
                <h2
                  class="text-4xl font-bold text-white mb-2 flex items-center gap-3"
                >
                  <i class="fas fa-folder-open text-midnight-400"></i>
                  My Projects
                </h2>
                <p class="text-midnight-300">
                  Explore my portfolio of web and mobile applications
                </p>
              </div>

              <!-- Filters -->
              <div class="flex flex-wrap gap-3">
                <select
                  id="yearFilter"
                  class="px-4 py-2.5 bg-midnight-800/80 rounded-lg text-white border border-midnight-700/50 focus:outline-none focus:ring-2 focus:ring-midnight-500 transition-all min-w-[140px] backdrop-blur-sm"
                  aria-label="Filter projects by year"
                >
                  <option value="all" class="bg-midnight-900 text-white">
                    All Years
                  </option>
                </select>
                <select
                  id="typeFilter"
                  class="px-4 py-2.5 bg-midnight-800/80 rounded-lg text-white border border-midnight-700/50 focus:outline-none focus:ring-2 focus:ring-midnight-500 transition-all min-w-[140px] backdrop-blur-sm"
                  aria-label="Filter projects by type"
                >
                  <option value="all" class="bg-midnight-900 text-white">
                    All Types
                  </option>
                </select>
              </div>
            </div>
          </div>

          <!-- Projects Grid -->
          <div
            id="projectContainer"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 fade-in"
            style="animation-delay: 0.4s"
          >
            <!-- Loading Skeleton -->
            <div class="shimmer rounded-2xl h-96"></div>
            <div class="shimmer rounded-2xl h-96"></div>
            <div class="shimmer rounded-2xl h-96"></div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer
      class="mt-20 py-12 border-t border-midnight-800/50 fade-in"
      style="animation-delay: 0.6s"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
        <div class="text-center">
          <p class="text-midnight-400 mb-4">
            © 2025 Narapati Keysa Anandi. All rights reserved.
          </p>
          <p class="text-midnight-500 mb-6">
            Web & Mobile Developer based in Indonesia
          </p>

          <!-- Backlink -->
          <div class="mb-6">
            <a
              href="https://kodingin.id"
              target="_blank"
              rel="noopener"
              class="text-midnight-400 hover:text-midnight-300 transition-colors duration-300 hover:underline"
            >
              kodingin.id
            </a>
          </div>

          <!-- Visitor Counter -->
          <div class="flex justify-center">
            <img
              src="https://api.visitorbadge.io/api/visitors?path=narapatis.my.id&label=Visitors&countColor=%23263759"
              alt="Visitor Count"
              class="opacity-75 hover:opacity-100 transition-opacity"
              loading="lazy"
            />
          </div>
        </div>
      </div>
    </footer>

    <!-- Initialize loading state -->
    <script>
      window.addEventListener("load", () => {
        document.body.classList.remove("loading");
        document.body.classList.add("loaded");
      });

      // Register Service Worker for offline support and caching
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          // Works for both root domain and GitHub Pages subdirectory
          const swPath = window.location.pathname.includes("/Shortlink/")
            ? "/Shortlink/sw.js"
            : "./sw.js";

          navigator.serviceWorker
            .register(swPath)
            .then((registration) =>
              console.log("✅ Service Worker registered:", registration.scope)
            )
            .catch((error) => console.log("❌ SW registration failed:", error));
        });
      }

      // Preload critical images on idle
      if ("requestIdleCallback" in window) {
        requestIdleCallback(() => {
          const criticalImages = ["src/img/profile/profile.JPG"];
          criticalImages.forEach((src) => {
            const link = document.createElement("link");
            link.rel = "prefetch";
            link.as = "image";
            link.href = src;
            document.head.appendChild(link);
          });
        });
      }
    </script>

    <!-- Load scripts with performance optimization -->
    <script src="src/js/performance.js" async></script>
    <script src="src/js/main.js" defer></script>
    <script src="src/js/card-fix.js" defer></script>
    <script src="src/js/accessibility-check.js" defer></script>
    <script src="src/js/tracking.js" async></script>
    <script src="src/js/debug.js" async></script>
  </body>
</html>
